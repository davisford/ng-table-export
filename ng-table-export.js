/*! ngTableExport v0.1.0 by Vitalii Savchuk(esvit666@gmail.com) - https://github.com/esvit/ng-table-export - New BSD License */

angular.module("ngTableExport",[]).config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|data):/)}]).directive("exportCsv",["$parse","$timeout",function(a,b){var c="	",d="data:text/csv;charset=UTF-8,";return{restrict:"A",scope:!1,link:function(e,f,g){function h(a){return'"'+a.replace(/^\s\s*/,"").replace(/\s*\s$/,"").replace(/"/g,'""')+'"'}function i(){k="";var a=f.find("tr");angular.forEach(a,function(a,b){var d=angular.element(a),e=d.find("th"),f="";d.hasClass("ng-table-filters")||(0===e.length&&(e=d.find("td")),1!==b&&(angular.forEach(e,function(a){f+=h(angular.element(a).text())+Array.apply(null,Array(a.colSpan)).map(function(){return c}).join("")}),f=f.slice(0,f.length-1)),k+=f+"\n")}),k="sep="+c+"\n"+k}function j(a,c){var d=document.createElement("a");d.style.display="none",d.href=a,d.download=c,d.target="_blank",b(function(){document.body.appendChild(d),d.click(),document.body.removeChild(d)},0,!1)}var k="";g.delimiter&&(c=g.delimiter);var l={generate:function(a,c,f,h){var l=g.ngTable,f=f||e.$parent.tableParams,m=f?f.settings():{},n=f?f.count():{},o=f?m.total:{},h=void 0===h?!1:h;if(!h&&l&&o>n){var p=m.$scope.$on("ngTableAfterReloadData",function(){p(),b(function(){i(),f.count(n),f.reload(),j(d+encodeURIComponent(k),c)},1e3,!1)});f.count(1/0),f.reload()}else i(),j(d+encodeURIComponent(k),c)}};a(g.exportCsv).assign(e.$parent,l)}}}]);
//# sourceMappingURL=ng-table-export.map